# Job Worker

Этот проект представляет собой легкую и отказоустойчивую систему для обработки фоновых задач. Система реализована
на языке Go и использует Redis Sorted Set в качестве очереди с приоритетом.

## Основные возможности

- **Гибкая настройка**: Возможность гибко конфигурировать клиент Redis, http сервер и сам worker pool, для этого
присутствует config.yml в internal/config
- **Приоритеты**: Чем меньше значение score у джобы, тем приоритетнее она является
- **Таймауты**: Присутствует таймауты на выполнение задач
- **Ретраи**: При возникновении ошибки или таймаута джобы делаются ретраи
- **Паузы**: Можно остановить выполнение джоб на время(уже запущенные джобы выполнятся, остальные будут ждать)

## Запуск
Запуск происходит с помощью **docker compose**

## API

### Добавление задачи

**Endpoint**: `POST /jobs`

**Пример запроса**:
```json
{
  "name": "example_job",
  "score": 1 
}
```

**Пример ответа**:
```json
{
    "status": "created",
    "id": "382677dd8db64383ea9d375e67f6b2e1c94813a57009e1fd590d315cd158d816"
}
```

### Получение статуса задачи

**Endpoint**: `GET /jobs/{job_id}`

**Пример ответа**:
```json
{
  "created_at": "2025-03-19T05:09:41Z",
  "finished_at": "2025-03-19T05:09:43Z",
  "score": "123",
  "started_at": "2025-03-19T05:09:41Z",
  "status": "completed"
}
```

### Паузы 
**Endpoint**: `POST /pause`

**Пример ответа**:
```
paused
```

**Endpoint**: `POST /unpause`

**Пример ответа**:
```
unpaused
```

